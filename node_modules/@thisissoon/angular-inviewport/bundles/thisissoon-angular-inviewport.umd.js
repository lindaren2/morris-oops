(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/core')) :
    typeof define === 'function' && define.amd ? define('@thisissoon/angular-inviewport', ['exports', '@angular/core'], factory) :
    (factory((global.thisissoon = global.thisissoon || {}, global.thisissoon['angular-inviewport'] = {}),global.ng.core));
}(this, (function (exports,core) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var WINDOW = new core.InjectionToken('WINDOW', {
        providedIn: 'root',
        factory: function () { return window; }
    });

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * A simple lightweight library for Angular with that detects when an
     * element is within the browsers viewport and adds a `in-viewport` or
     * `not-in-viewport` class to the element.
     *
     * \@example
     * ```html
     * <p
     *  class="foo"
     *  snInViewport
     *  (inViewportChange)="myEventHandler($event)">
     *  Amet tempor excepteur occaecat nulla.
     * </p>
     * ```
     */
    // @dynamic
    var InViewportDirective = /** @class */ (function () {
        function InViewportDirective(el, window) {
            this.el = el;
            this.window = window;
            this.inViewportChange = new core.EventEmitter();
            this.hasIntersectionObserver = this.intersectionObserverFeatureDetection();
        }
        Object.defineProperty(InViewportDirective.prototype, "isInViewport", {
            get: /**
             * @return {?}
             */ function () {
                return this.inViewport;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(InViewportDirective.prototype, "isNotInViewport", {
            get: /**
             * @return {?}
             */ function () {
                return !this.inViewport;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @return {?}
         */
        InViewportDirective.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
                if (!this.hasIntersectionObserver) {
                    this.inViewport = true;
                    this.inViewportChange.emit(this.inViewport);
                }
            };
        /**
         * @return {?}
         */
        InViewportDirective.prototype.ngAfterViewInit = /**
         * @return {?}
         */
            function () {
                if (this.hasIntersectionObserver) {
                    /** @type {?} */
                    var IntersectionObserver_1 = this.window['IntersectionObserver'];
                    this.observer = new IntersectionObserver_1(this.intersectionObserverCallback.bind(this), this.inViewportOptions);
                    this.observer.observe(this.el.nativeElement);
                }
            };
        /**
         * @return {?}
         */
        InViewportDirective.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                if (this.observer) {
                    this.observer.unobserve(this.el.nativeElement);
                }
            };
        /**
         * @param {?} entries
         * @return {?}
         */
        InViewportDirective.prototype.intersectionObserverCallback = /**
         * @param {?} entries
         * @return {?}
         */
            function (entries) {
                var _this = this;
                entries.forEach(function (entry) {
                    if (_this.inViewport === entry.isIntersecting)
                        return;
                    _this.inViewport = entry.isIntersecting;
                    _this.inViewportChange.emit(_this.inViewport);
                });
            };
        /**
         * @private
         * @return {?}
         */
        InViewportDirective.prototype.intersectionObserverFeatureDetection = /**
         * @private
         * @return {?}
         */
            function () {
                // Exits early if all IntersectionObserver and IntersectionObserverEntry
                // features are natively supported.
                if ('IntersectionObserver' in this.window &&
                    'IntersectionObserverEntry' in this.window) {
                    // Minimal polyfill for Edge 15's lack of `isIntersecting`
                    // See: https://github.com/w3c/IntersectionObserver/issues/211
                    if (!('isIntersecting' in
                        this.window['IntersectionObserverEntry']['prototype'])) {
                        Object.defineProperty(this.window['IntersectionObserverEntry']['prototype'], 'isIntersecting', {
                            get: function () {
                                return this.intersectionRatio > 0;
                            }
                        });
                    }
                    return true;
                }
                return false;
            };
        InViewportDirective.decorators = [
            { type: core.Directive, args: [{
                        selector: '[snInViewport]',
                        exportAs: 'snInViewport'
                    },] }
        ];
        /** @nocollapse */
        InViewportDirective.ctorParameters = function () {
            return [
                { type: core.ElementRef },
                { type: Window, decorators: [{ type: core.Inject, args: [WINDOW,] }] }
            ];
        };
        InViewportDirective.propDecorators = {
            inViewportOptions: [{ type: core.Input }],
            inViewportChange: [{ type: core.Output }],
            isInViewport: [{ type: core.HostBinding, args: ['class.sn-viewport--in',] }],
            isNotInViewport: [{ type: core.HostBinding, args: ['class.sn-viewport--out',] }]
        };
        return InViewportDirective;
    }());

    /*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
    var __assign = function () {
        __assign = Object.assign || function __assign(t) {
            for (var s, i = 1, n = arguments.length; i < n; i++) {
                s = arguments[i];
                for (var p in s)
                    if (Object.prototype.hasOwnProperty.call(s, p))
                        t[p] = s[p];
            }
            return t;
        };
        return __assign.apply(this, arguments);
    };

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /** @type {?} */
    var WINDOW_MOCK_WITHOUT_INTERSECTION_OBSERVER = {
        closed: null,
        defaultStatus: null,
        document: null,
        frameElement: null,
        frames: null,
        history: null,
        innerHeight: null,
        innerWidth: null,
        length: null,
        localStorage: null,
        location: null,
        name: null,
        navigator: null,
        opener: null,
        outerHeight: null,
        outerWidth: null,
        pageXOffset: null,
        pageYOffset: null,
        parent: null,
        screen: null,
        screenLeft: null,
        screenTop: null,
        screenX: null,
        screenY: null,
        sessionStorage: null,
        scrollX: null,
        scrollY: null,
        self: null,
        status: null,
        top: null,
        addEventListener: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        alert: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        atob: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        blur: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        btoa: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        clearInterval: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        clearTimeout: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        close: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        confirm: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        focus: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        getComputedStyle: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        getSelection: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        matchMedia: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        moveBy: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        moveTo: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        open: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        print: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        prompt: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        resizeBy: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        resizeTo: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        removeEventListener: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        scroll: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        scrollBy: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        scrollTo: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        setInterval: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        setTimeout: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        },
        stop: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return null;
        }
    };
    /** @type {?} */
    var WINDOW_MOCK = __assign({}, WINDOW_MOCK_WITHOUT_INTERSECTION_OBSERVER, { IntersectionObserver: function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            return ({
                observe: function () { return null; },
                unobserve: function () { return null; }
            });
        }, IntersectionObserverEntry: /** @class */ (function () {
            function IntersectionObserverEntryMock() {
            }
            return IntersectionObserverEntryMock;
        }()) });

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */
    /**
     * A simple lightweight library for Angular with other dependencies
     * that detects when an element is within the browsers viewport and adds a
     * sn-viewport--in or sn-viewport--out class to the element.
     */
    var InViewportModule = /** @class */ (function () {
        function InViewportModule() {
        }
        /**
         * @return {?}
         */
        InViewportModule.forServer = /**
         * @return {?}
         */
            function () {
                return {
                    ngModule: InViewportModule,
                    providers: [{ provide: WINDOW, useValue: WINDOW_MOCK }]
                };
            };
        InViewportModule.decorators = [
            { type: core.NgModule, args: [{
                        declarations: [InViewportDirective],
                        exports: [InViewportDirective]
                    },] }
        ];
        return InViewportModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes,extraRequire,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
     */

    exports.InViewportModule = InViewportModule;
    exports.InViewportDirective = InViewportDirective;
    exports.WINDOW_MOCK = WINDOW_MOCK;
    exports.WINDOW = WINDOW;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGhpc2lzc29vbi1hbmd1bGFyLWludmlld3BvcnQudW1kLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9AdGhpc2lzc29vbi9hbmd1bGFyLWludmlld3BvcnQvYXBwL3dpbmRvdy93aW5kb3ctdG9rZW4udHMiLCJuZzovL0B0aGlzaXNzb29uL2FuZ3VsYXItaW52aWV3cG9ydC9hcHAvaW4tdmlld3BvcnQvaW4tdmlld3BvcnQuZGlyZWN0aXZlLnRzIiwibm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmVzNi5qcyIsIm5nOi8vQHRoaXNpc3Nvb24vYW5ndWxhci1pbnZpZXdwb3J0L2FwcC93aW5kb3cvd2luZG93LW1vY2sudHMiLCJuZzovL0B0aGlzaXNzb29uL2FuZ3VsYXItaW52aWV3cG9ydC9hcHAvaW4tdmlld3BvcnQvaW4tdmlld3BvcnQubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGlvblRva2VuIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmV4cG9ydCBjb25zdCBXSU5ET1cgPSBuZXcgSW5qZWN0aW9uVG9rZW48V2luZG93PignV0lORE9XJywge1xuICBwcm92aWRlZEluOiAncm9vdCcsXG4gIGZhY3Rvcnk6ICgpID0+IHdpbmRvd1xufSk7XG4iLCJpbXBvcnQge1xuICBEaXJlY3RpdmUsXG4gIEVsZW1lbnRSZWYsXG4gIEhvc3RCaW5kaW5nLFxuICBFdmVudEVtaXR0ZXIsXG4gIE91dHB1dCxcbiAgT25EZXN0cm95LFxuICBBZnRlclZpZXdJbml0LFxuICBJbmplY3QsXG4gIElucHV0LFxuICBPbkluaXRcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBXSU5ET1cgfSBmcm9tICcuLi93aW5kb3cvd2luZG93LXRva2VuJztcblxuLyoqXG4gKiBBIHNpbXBsZSBsaWdodHdlaWdodCBsaWJyYXJ5IGZvciBBbmd1bGFyIHdpdGggdGhhdCBkZXRlY3RzIHdoZW4gYW5cbiAqIGVsZW1lbnQgaXMgd2l0aGluIHRoZSBicm93c2VycyB2aWV3cG9ydCBhbmQgYWRkcyBhIGBpbi12aWV3cG9ydGAgb3JcbiAqIGBub3QtaW4tdmlld3BvcnRgIGNsYXNzIHRvIHRoZSBlbGVtZW50LlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBodG1sXG4gKiA8cFxuICogIGNsYXNzPVwiZm9vXCJcbiAqICBzbkluVmlld3BvcnRcbiAqICAoaW5WaWV3cG9ydENoYW5nZSk9XCJteUV2ZW50SGFuZGxlcigkZXZlbnQpXCI+XG4gKiAgQW1ldCB0ZW1wb3IgZXhjZXB0ZXVyIG9jY2FlY2F0IG51bGxhLlxuICogPC9wPlxuICogYGBgXG4gKi9cbi8vIEBkeW5hbWljXG5ARGlyZWN0aXZlKHtcbiAgc2VsZWN0b3I6ICdbc25JblZpZXdwb3J0XScsXG4gIGV4cG9ydEFzOiAnc25JblZpZXdwb3J0J1xufSlcbmV4cG9ydCBjbGFzcyBJblZpZXdwb3J0RGlyZWN0aXZlIGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95LCBPbkluaXQge1xuICBwcml2YXRlIGluVmlld3BvcnQ6IGJvb2xlYW47XG4gIHByaXZhdGUgaGFzSW50ZXJzZWN0aW9uT2JzZXJ2ZXI6IGJvb2xlYW47XG4gIEBJbnB1dCgpXG4gIGluVmlld3BvcnRPcHRpb25zOiBJbnRlcnNlY3Rpb25PYnNlcnZlckluaXQ7XG4gIEBPdXRwdXQoKVxuICBpblZpZXdwb3J0Q2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xuICBvYnNlcnZlcjogSW50ZXJzZWN0aW9uT2JzZXJ2ZXI7XG5cbiAgQEhvc3RCaW5kaW5nKCdjbGFzcy5zbi12aWV3cG9ydC0taW4nKVxuICBnZXQgaXNJblZpZXdwb3J0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmluVmlld3BvcnQ7XG4gIH1cblxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLnNuLXZpZXdwb3J0LS1vdXQnKVxuICBnZXQgaXNOb3RJblZpZXdwb3J0KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5pblZpZXdwb3J0O1xuICB9XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBlbDogRWxlbWVudFJlZiwgQEluamVjdChXSU5ET1cpIHByaXZhdGUgd2luZG93OiBXaW5kb3cpIHtcbiAgICB0aGlzLmhhc0ludGVyc2VjdGlvbk9ic2VydmVyID0gdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlckZlYXR1cmVEZXRlY3Rpb24oKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIGlmICghdGhpcy5oYXNJbnRlcnNlY3Rpb25PYnNlcnZlcikge1xuICAgICAgdGhpcy5pblZpZXdwb3J0ID0gdHJ1ZTtcbiAgICAgIHRoaXMuaW5WaWV3cG9ydENoYW5nZS5lbWl0KHRoaXMuaW5WaWV3cG9ydCk7XG4gICAgfVxuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIGlmICh0aGlzLmhhc0ludGVyc2VjdGlvbk9ic2VydmVyKSB7XG4gICAgICBjb25zdCBJbnRlcnNlY3Rpb25PYnNlcnZlciA9IHRoaXMud2luZG93WydJbnRlcnNlY3Rpb25PYnNlcnZlciddO1xuICAgICAgdGhpcy5vYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgICAgdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlckNhbGxiYWNrLmJpbmQodGhpcyksXG4gICAgICAgIHRoaXMuaW5WaWV3cG9ydE9wdGlvbnNcbiAgICAgICk7XG5cbiAgICAgIHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIGlmICh0aGlzLm9ic2VydmVyKSB7XG4gICAgICB0aGlzLm9ic2VydmVyLnVub2JzZXJ2ZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQpO1xuICAgIH1cbiAgfVxuXG4gIGludGVyc2VjdGlvbk9ic2VydmVyQ2FsbGJhY2soZW50cmllczogSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeVtdKSB7XG4gICAgZW50cmllcy5mb3JFYWNoKGVudHJ5ID0+IHtcbiAgICAgIGlmICh0aGlzLmluVmlld3BvcnQgPT09IGVudHJ5LmlzSW50ZXJzZWN0aW5nKSByZXR1cm47XG4gICAgICB0aGlzLmluVmlld3BvcnQgPSBlbnRyeS5pc0ludGVyc2VjdGluZztcbiAgICAgIHRoaXMuaW5WaWV3cG9ydENoYW5nZS5lbWl0KHRoaXMuaW5WaWV3cG9ydCk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGludGVyc2VjdGlvbk9ic2VydmVyRmVhdHVyZURldGVjdGlvbigpIHtcbiAgICAvLyBFeGl0cyBlYXJseSBpZiBhbGwgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIgYW5kIEludGVyc2VjdGlvbk9ic2VydmVyRW50cnlcbiAgICAvLyBmZWF0dXJlcyBhcmUgbmF0aXZlbHkgc3VwcG9ydGVkLlxuICAgIGlmIChcbiAgICAgICdJbnRlcnNlY3Rpb25PYnNlcnZlcicgaW4gdGhpcy53aW5kb3cgJiZcbiAgICAgICdJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5JyBpbiB0aGlzLndpbmRvd1xuICAgICkge1xuICAgICAgLy8gTWluaW1hbCBwb2x5ZmlsbCBmb3IgRWRnZSAxNSdzIGxhY2sgb2YgYGlzSW50ZXJzZWN0aW5nYFxuICAgICAgLy8gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vdzNjL0ludGVyc2VjdGlvbk9ic2VydmVyL2lzc3Vlcy8yMTFcbiAgICAgIGlmIChcbiAgICAgICAgIShcbiAgICAgICAgICAnaXNJbnRlcnNlY3RpbmcnIGluXG4gICAgICAgICAgdGhpcy53aW5kb3dbJ0ludGVyc2VjdGlvbk9ic2VydmVyRW50cnknXVsncHJvdG90eXBlJ11cbiAgICAgICAgKVxuICAgICAgKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShcbiAgICAgICAgICB0aGlzLndpbmRvd1snSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeSddWydwcm90b3R5cGUnXSxcbiAgICAgICAgICAnaXNJbnRlcnNlY3RpbmcnLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0aGlzLmludGVyc2VjdGlvblJhdGlvID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iLCIvKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcclxuQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXHJcbkxpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7IHlvdSBtYXkgbm90IHVzZVxyXG50aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4gWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZVxyXG5MaWNlbnNlIGF0IGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG5cclxuVEhJUyBDT0RFIElTIFBST1ZJREVEIE9OIEFOICpBUyBJUyogQkFTSVMsIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWVxyXG5LSU5ELCBFSVRIRVIgRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgV0lUSE9VVCBMSU1JVEFUSU9OIEFOWSBJTVBMSUVEXHJcbldBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBUSVRMRSwgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UsXHJcbk1FUkNIQU5UQUJMSVRZIE9SIE5PTi1JTkZSSU5HRU1FTlQuXHJcblxyXG5TZWUgdGhlIEFwYWNoZSBWZXJzaW9uIDIuMCBMaWNlbnNlIGZvciBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcclxuYW5kIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xyXG4vKiBnbG9iYWwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19leHRlbmRzKGQsIGIpIHtcclxuICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2Fzc2lnbiA9IGZ1bmN0aW9uKCkge1xyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uIF9fYXNzaWduKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX19hc3NpZ24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVzdChzLCBlKSB7XHJcbiAgICB2YXIgdCA9IHt9O1xyXG4gICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICBpZiAocyAhPSBudWxsICYmIHR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzID09PSBcImZ1bmN0aW9uXCIpXHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDApXHJcbiAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUocmVzdWx0LnZhbHVlKTsgfSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XHJcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4cG9ydFN0YXIobSwgZXhwb3J0cykge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX192YWx1ZXMobykge1xyXG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdLCBpID0gMDtcclxuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XHJcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19yZWFkKG8sIG4pIHtcclxuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cclxuICAgIH1cclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkKCkge1xyXG4gICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgYXIgPSBhci5jb25jYXQoX19yZWFkKGFyZ3VtZW50c1tpXSkpO1xyXG4gICAgcmV0dXJuIGFyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcbiIsImV4cG9ydCBjb25zdCBXSU5ET1dfTU9DS19XSVRIT1VUX0lOVEVSU0VDVElPTl9PQlNFUlZFUiA9IHtcbiAgY2xvc2VkOiBudWxsLFxuICBkZWZhdWx0U3RhdHVzOiBudWxsLFxuICBkb2N1bWVudDogbnVsbCxcbiAgZnJhbWVFbGVtZW50OiBudWxsLFxuICBmcmFtZXM6IG51bGwsXG4gIGhpc3Rvcnk6IG51bGwsXG4gIGlubmVySGVpZ2h0OiBudWxsLFxuICBpbm5lcldpZHRoOiBudWxsLFxuICBsZW5ndGg6IG51bGwsXG4gIGxvY2FsU3RvcmFnZTogbnVsbCxcbiAgbG9jYXRpb246IG51bGwsXG4gIG5hbWU6IG51bGwsXG4gIG5hdmlnYXRvcjogbnVsbCxcbiAgb3BlbmVyOiBudWxsLFxuICBvdXRlckhlaWdodDogbnVsbCxcbiAgb3V0ZXJXaWR0aDogbnVsbCxcbiAgcGFnZVhPZmZzZXQ6IG51bGwsXG4gIHBhZ2VZT2Zmc2V0OiBudWxsLFxuICBwYXJlbnQ6IG51bGwsXG4gIHNjcmVlbjogbnVsbCxcbiAgc2NyZWVuTGVmdDogbnVsbCxcbiAgc2NyZWVuVG9wOiBudWxsLFxuICBzY3JlZW5YOiBudWxsLFxuICBzY3JlZW5ZOiBudWxsLFxuICBzZXNzaW9uU3RvcmFnZTogbnVsbCxcbiAgc2Nyb2xsWDogbnVsbCxcbiAgc2Nyb2xsWTogbnVsbCxcbiAgc2VsZjogbnVsbCxcbiAgc3RhdHVzOiBudWxsLFxuICB0b3A6IG51bGwsXG4gIGFkZEV2ZW50TGlzdGVuZXI6ICguLi5hcmdzKSA9PiBudWxsLFxuICBhbGVydDogKC4uLmFyZ3MpID0+IG51bGwsXG4gIGF0b2I6ICguLi5hcmdzKSA9PiBudWxsLFxuICBibHVyOiAoLi4uYXJncykgPT4gbnVsbCxcbiAgYnRvYTogKC4uLmFyZ3MpID0+IG51bGwsXG4gIGNsZWFySW50ZXJ2YWw6ICguLi5hcmdzKSA9PiBudWxsLFxuICBjbGVhclRpbWVvdXQ6ICguLi5hcmdzKSA9PiBudWxsLFxuICBjbG9zZTogKC4uLmFyZ3MpID0+IG51bGwsXG4gIGNvbmZpcm06ICguLi5hcmdzKSA9PiBudWxsLFxuICBmb2N1czogKC4uLmFyZ3MpID0+IG51bGwsXG4gIGdldENvbXB1dGVkU3R5bGU6ICguLi5hcmdzKSA9PiBudWxsLFxuICBnZXRTZWxlY3Rpb246ICguLi5hcmdzKSA9PiBudWxsLFxuICBtYXRjaE1lZGlhOiAoLi4uYXJncykgPT4gbnVsbCxcbiAgbW92ZUJ5OiAoLi4uYXJncykgPT4gbnVsbCxcbiAgbW92ZVRvOiAoLi4uYXJncykgPT4gbnVsbCxcbiAgb3BlbjogKC4uLmFyZ3MpID0+IG51bGwsXG4gIHByaW50OiAoLi4uYXJncykgPT4gbnVsbCxcbiAgcHJvbXB0OiAoLi4uYXJncykgPT4gbnVsbCxcbiAgcmVzaXplQnk6ICguLi5hcmdzKSA9PiBudWxsLFxuICByZXNpemVUbzogKC4uLmFyZ3MpID0+IG51bGwsXG4gIHJlbW92ZUV2ZW50TGlzdGVuZXI6ICguLi5hcmdzKSA9PiBudWxsLFxuICBzY3JvbGw6ICguLi5hcmdzKSA9PiBudWxsLFxuICBzY3JvbGxCeTogKC4uLmFyZ3MpID0+IG51bGwsXG4gIHNjcm9sbFRvOiAoLi4uYXJncykgPT4gbnVsbCxcbiAgc2V0SW50ZXJ2YWw6ICguLi5hcmdzKSA9PiBudWxsLFxuICBzZXRUaW1lb3V0OiAoLi4uYXJncykgPT4gbnVsbCxcbiAgc3RvcDogKC4uLmFyZ3MpID0+IG51bGxcbn07XG5cbmV4cG9ydCBjb25zdCBXSU5ET1dfTU9DSyA9IHtcbiAgLi4uV0lORE9XX01PQ0tfV0lUSE9VVF9JTlRFUlNFQ1RJT05fT0JTRVJWRVIsXG4gIEludGVyc2VjdGlvbk9ic2VydmVyOiAoLi4uYXJncykgPT4gKHtcbiAgICBvYnNlcnZlOiAoKSA9PiBudWxsLFxuICAgIHVub2JzZXJ2ZTogKCkgPT4gbnVsbFxuICB9KSxcbiAgSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeTogY2xhc3MgSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeU1vY2sge31cbn07XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSwgTW9kdWxlV2l0aFByb3ZpZGVycyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBJblZpZXdwb3J0RGlyZWN0aXZlIH0gZnJvbSAnLi9pbi12aWV3cG9ydC5kaXJlY3RpdmUnO1xuaW1wb3J0IHsgV0lORE9XIH0gZnJvbSAnLi4vd2luZG93L3dpbmRvdy10b2tlbic7XG5pbXBvcnQgeyBXSU5ET1dfTU9DSyB9IGZyb20gJy4uL3dpbmRvdy93aW5kb3ctbW9jayc7XG5cbi8qKlxuICogQSBzaW1wbGUgbGlnaHR3ZWlnaHQgbGlicmFyeSBmb3IgQW5ndWxhciB3aXRoIG90aGVyIGRlcGVuZGVuY2llc1xuICogdGhhdCBkZXRlY3RzIHdoZW4gYW4gZWxlbWVudCBpcyB3aXRoaW4gdGhlIGJyb3dzZXJzIHZpZXdwb3J0IGFuZCBhZGRzIGFcbiAqIHNuLXZpZXdwb3J0LS1pbiBvciBzbi12aWV3cG9ydC0tb3V0IGNsYXNzIHRvIHRoZSBlbGVtZW50LlxuICovXG5ATmdNb2R1bGUoe1xuICBkZWNsYXJhdGlvbnM6IFtJblZpZXdwb3J0RGlyZWN0aXZlXSxcbiAgZXhwb3J0czogW0luVmlld3BvcnREaXJlY3RpdmVdXG59KVxuZXhwb3J0IGNsYXNzIEluVmlld3BvcnRNb2R1bGUge1xuICBzdGF0aWMgZm9yU2VydmVyKCk6IE1vZHVsZVdpdGhQcm92aWRlcnMge1xuICAgIHJldHVybiB7XG4gICAgICBuZ01vZHVsZTogSW5WaWV3cG9ydE1vZHVsZSxcbiAgICAgIHByb3ZpZGVyczogW3sgcHJvdmlkZTogV0lORE9XLCB1c2VWYWx1ZTogV0lORE9XX01PQ0sgfV1cbiAgICB9O1xuICB9XG59XG4iXSwibmFtZXMiOlsiSW5qZWN0aW9uVG9rZW4iLCJFdmVudEVtaXR0ZXIiLCJEaXJlY3RpdmUiLCJFbGVtZW50UmVmIiwiSW5qZWN0IiwiSW5wdXQiLCJPdXRwdXQiLCJIb3N0QmluZGluZyIsIk5nTW9kdWxlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7QUFFQSxRQUFhLE1BQU0sR0FBRyxJQUFJQSxtQkFBYyxDQUFTLFFBQVEsRUFBRTtRQUN6RCxVQUFVLEVBQUUsTUFBTTtRQUNsQixPQUFPLEVBQUUsY0FBTSxPQUFBLE1BQU0sR0FBQTtLQUN0QixDQUFDOzs7Ozs7QUNMRjs7Ozs7Ozs7Ozs7Ozs7OztBQThCQTtRQXVCRSw2QkFBb0IsRUFBYyxFQUEwQixNQUFjO1lBQXRELE9BQUUsR0FBRixFQUFFLENBQVk7WUFBMEIsV0FBTSxHQUFOLE1BQU0sQ0FBUTtZQWIxRSxxQkFBZ0IsR0FBRyxJQUFJQyxpQkFBWSxFQUFXLENB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